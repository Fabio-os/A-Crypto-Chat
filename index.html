<!doctype html>
<html>
    <head>
        <title>A-Crypto-Chat</title>
        <style>
            :root {
                --main-color: #272346;
                --dark-color: #0c002b;
                --bubble-color: #5300a1;
                --light-color: #ddd;
            }
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            body {
                font: 13px Helvetica, Arial;
            }
            form {
                background: linear-gradient(180deg, var(--main-color) 0%, var(--dark-color) 100%);
                padding: 3px;
                position: fixed;
                bottom: 0;
                width: 100%;
                height: 100%;
            }
            form input {
                background: var(--main-color);
                border: 0;
                border-radius: 50px;
                outline: none;
                padding: 20px;
                width: calc(100% - 140px);
                height: 40px;
                margin-right: .5%;
                color: white;
                margin-left: 10px;
            }
            form button {
                user-select: none;
                text-transform: uppercase;
                width: 100px;
                height: 40px;
                color: var(--dark-color);
                font-size: 16px;
                outline: none;
                border-radius: 30px;
                border: none;
                background: var(--light-color);
                transition: all 0.5s ease;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                animation: fade-in 2s ease forwards;
                float: rigth;
                margin-left: 20px;
            }
            form button:hover {
                color: var(--dark-color);
                background: var(--light-color);
                box-shadow: 0 0px 50px rgba(255, 255, 255, 0.3);
            }
            #messages {
                list-style-type: none;
                margin: 0;
                padding: 0;
                height: calc(100% - 160px);
                overflow-y: scroll;
                margin-top: 20px;
                margin-bottom: 20px;
            }
            #messages li:nth-child(odd) {
                color: grey;
                font-style: italic;
                font-size: 12px;
                margin-bottom: 5px;
                margin-left: 15px;
            }
            #messages li:nth-child(even) {
                padding: 10px 15px;
                background: var(--bubble-color);
                color: white;
                margin-bottom: 20px;
                margin-left: 10px;
                display: inline-block;
                border-radius: 20px;
                max-width: 75%;
            }
            #username {
                width: 250px;
                margin-bottom: 20px;
                margin-top: 10px;
                background: var(--dark-color);
            }
            .scroll::-webkit-scrollbar {
                width: 10px;
            }
            .scroll::-webkit-scrollbar-thumb {
                background: white;
                border-radius:
                20px;
            }
            .scroll::-webkit-scrollbar-track {
                background: var(--bubble-color);
                border-radius: 10px;
            }
        </style>
    </head>
    <body>
        <form id="form" action="">
            <input id="username" maxlength="15" placeholder="Username" value="Unnamed" required/>
            <div class="separator"></div>
            <ul id="messages" class="scroll"></ul>
            <input id="message" autocomplete="off" placeholder="message" required/><button>Send</button>
        </form>
        <script src="/socket.io/socket.io.js"></script>
        <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
        <script>
            const socket = io();
            async function onFormSubmit(event) {
                event.preventDefault();
                let message = {};
                message.owner = document.getElementById("username").value;
                message.value = document.getElementById("message").value;
                socket.emit("chat message", message);
                document.getElementById("message").value = "";
                return false;
            }
            document.getElementById("form").addEventListener("submit", onFormSubmit);
            socket.on("chat message", (msg) => {
                let owner = document.createElement("li");
                let message = document.createElement("li");
                owner.innerHTML = msg.owner;
                message.innerHTML = msg.value;
                document.getElementById("messages").appendChild(owner);
                document.getElementById("messages").appendChild(message);
            });
        </script>
    </body>
</html>